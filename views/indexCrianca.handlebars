<div class="container">
  <header>
    <nav class="navbar navbar-expand-lg fixed-top px-2" style="z-index: 3; background-color: white;">
      <div class="container-fluid">
        
          <!--logo-->
          <div class="d-flex justify-content-start ms-4 ms-lg-5">
            <a class="navbar-brand" href="#">
              <i id="iconPerfil" class="bi bi-person-circle"></i>  
            </a>
          </div>

          <!--menu sanduíche-->
          <div class="d-flex me-4">
            <button class="navbar-toggler my-auto" type="button" data-bs-toggle="offcanvas" data-bs-target="#menuPrincipal" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon iconMenuSanduiche"></span>
            </button>
          </div>

        <!--menu principal-->
        <div class="offcanvas offcanvas-end" tabindex="-1" id="menuPrincipal" aria-labelledby="offcanvasNavbarLabel">
          <div class="offcanvas-header">
            <h2 class="offcanvas-title" id="offcanvasNavbarLabel">Menu</h2>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item me-5 ms-lg-2">
              <div class="d-flex align-items-center">
                <i class="iconMenu bi bi-house-fill d-lg-none"></i>
                <a class="nav-link active ms-3" aria-current="page" href="/indexCrianca.handlebars">Início</a>
            </div>
            </li>
            <li class="nav-item me-5">
              <div class="d-flex align-items-center">
                <i class="iconMenu bi bi-people-fill d-lg-none"></i>
                <a class="nav-link ms-3" href="/turmasCrianca.handlebars">Turmas</a>
              </div>
            </li>
            <li class="nav-item">
              <div class="d-flex align-items-center">
                <i class="iconMenu bi bi-clipboard2-fill d-lg-none"></i>
                <a class="nav-link ms-3" href="/eventosCrianca.handlebars">Eventos</a>
              </div>
            </li>
          </ul>
        </div>
    </nav>
  </header>
  
  <!-- Menu flutuante -->
  <div id="menuPerfil">
    <p id="nomePerfil" class="text-center mt-3">{{aluno.nome}}</p>
    
    <a class="navbar-brand text-center" href="#">
      <i class="bi bi-person-circle"></i>  
    </a>

    <!-- Botões do menu de perfil -->
    <div class="text-center mb-3">
      <a href="/editarAlunoPerfil" class="d-block mb-2">Editar perfil</a>
      <a href="/logout-simples" class="d-block">Sair da conta</a>
    </div>

    <!-- Modal de edição de perfil do aluno -->
    <div class="modal fade" id="modalEditarAluno" tabindex="-1" aria-labelledby="modalEditarAlunoLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalEditarAlunoLabel">Editar Perfil</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            
          </div>
        </div>
      </div>
    </div>

    <script>
      function abrirModalEditarAluno(cod) {
        fetch(`/api/aluno/${cod}`)
          .then(res => res.json())
          .then(aluno => {
            document.getElementById('modalNomeAluno').value = aluno.nome || '';
            document.getElementById('modalEmailAluno').value = aluno.email || '';
            // Preencher outros campos se necessário
            document.getElementById('formModalEditarAluno').dataset.cod = cod;
            var modal = new bootstrap.Modal(document.getElementById('modalEditarAluno'));
            modal.show();
          });
      }

      document.getElementById('formModalEditarAluno').addEventListener('submit', function(e) {
        e.preventDefault();
        const cod = e.target.dataset.cod;
        const dados = {
          nome: document.getElementById('modalNomeAluno').value,
          email: document.getElementById('modalEmailAluno').value
          // Adicione outros campos aqui
        };
        fetch(`/perfil/editar/${cod}`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(dados)
        })
        .then(res => res.ok ? res.json() : Promise.reject(res))
        .then(() => {
          alert('Perfil atualizado com sucesso!');
          location.reload();
        })
        .catch(() => alert('Erro ao atualizar perfil.'));
      });
    </script>

    <script>
      window.usuarioCod = {{aluno.cod}};
      window.usuarioTipo = 'aluno';
    </script>
    <script src="/scripts/inativarCadastro.js"></script>
  </div>

  <article>
    <div class="row" id="indexText">           
      <div class="col-md-4">
        <div class="mt-lg-3">
          <h1 id="graca" class="display-1 mt-4 mt-lg-0">Graça</h1>
        </div> 
          <h1 id="kids" class="display-1">Kids</h1>
          <p id="textinho" class="d-flex justify-content-center">
            Bem-vindo ao site<br>do Graça Kids, onde<br>serão gerenciados<br>os dados e eventos<br>do Ministério.
          </p>
      </div>
      <div class="col d-flex justify-content-center">
        <img id="imgIndex" class="img-fluid d-block" src="imagens/fundoIndex.png" style="z-index: -30">
      </div>
    </div>
    </div>
  </article>
</div>

<script>
// ...existing code...
</script>
